动态函数式语言精髓 ->JavaScript语言精髓与编程实战 精简版  周爱民

## 命令式语言

###  1. 命令式语言的发展综论

#### 1.1 命令式语言与结构编程

演化： 从结构化编程到面向对象编程

#### 结构化编程

结构解释包含三部分

- 控制结构
- 组织结构
- 数据结构

命令式语言是指是面向存储编程

#### 1.2 结构化的疑难

如何抽象数据存储

结构化编程中 利用 结构类型 解决 问题

- 数据表达上过度弹性带来编程设计中的不规范
- 抽象层次过低

#### 1.3 面向对象语言 是突破么

面向对象提出通过更加细化的可见性设定 实现更好的数据封装及数据域管理

对象是比结构体更高层次的数据抽象 不过基于的仍旧是对结构的认可

结构化的抽象是实体到结构体的直接映射 面向对象的抽象是实体到类 衍生关系到 类继承树 的映射

#### 1.4 更高层次的抽象 接口

并非开发中的api hci这些接口

将对象系统理解为三个元素的复合体

- 数据 对象封装了数据体以及数据的存储逻辑
- 行为 对象向外表现了数据上可以进行的运算与运算逻辑
- 关系 对象系统设定了一些交互关系

接口提出的观点 只暴露数据体的逻辑行为的能力 而不暴露这种能力的实现方法和基于的数据特性

接口首次从系统或模块中剥离了数据的概念，把与数据有关的关系也清理出来 

接口是一种更高层次的抽象 是目标系统与计算机系统的功能特性的投影

接口的附加价值 体系的可描述性 

#### 1.5 再论语言的分类

### 2. 语法及作用域问题

基本逻辑语句是保证程序执行的基本要素 复合语句使这种结构在组织大型程序的同时，能够以模块化形式清晰呈现出来。

由基本逻辑组合而成的代码块 被以函数的形式组合成更大的程序片段

最后 更多的函数 语句与代码块则构成了文件 通常称为代码的物理结构 物理结构中 文件通常对应于 单元（部署概念上的逻辑结构）

不同语言对 单元 以上级别的模块的解释都不相同 

更高层次 部署概念的逻辑结构还有包 命名空间等



代码的组织结构中 可以简单的解释为 代码分块 而代码分块带来的语法效果是信息隐藏 所谓信息隐藏值得是变量或成员的可见性问题 而这个可见性问题 则依赖于语法的陈述 这就被成为作用域



作用域包括 语法作用域 变量作用域

结构化语言中 代码块的作用域是互不相交的 只存在平行或嵌套两种相关性 消除耦合

结构化语言特点

- 相同级别的语言作用域可以相互嵌套
- 高级别的语法作用域能够包含低级别的语法作用域
- 低级别的语法作用域不能包含高级别作用域

命令式语言思想

- 语法作用域是互不相交的 
- 语法作用域可以存在平行或包含关系 高级别可以嵌套低级别的语法作用域 反之不成立

### 3. 变量作用域及生存周期问题

通常语法作用域与变量作用域是一致的 成为静态语义

js却不是一种静态语义的语言 所以代码的作用域是不确定的 

动态作用域绑定的事实：语法作用域与变量作用域是不一致的



语法作用域 与 变量作用域 二者之间的区别 在于前者是语法分析阶段对代码块组织结构的理解 后者是代码执行阶段对变量存储的理解

两点事实：

- 语法作用域与变量作用域不同
- 变量的可见性受限于所在的语法结构的语法作用域

变量的生存周期是指它何时被创建和被释放

js中变量生存周期有两个： 函数内部的局部执行期间和函数外引擎的全局执行期间

### 4. 原型继承的基本原理与实质

面向对象 有三个基本特性 封装 继承 多态

对象系统 的继承特性有三种实现方案： 基于类 基于原型 基于元类

js采用原型继承实现对象系统 所以js没有类 而采用一种名为构造器的机制来实现类的某些功能

原型也是对象实例 是一个关键的性质 这是与 类继承体系在本质上的不同 原型继承的实质是复制

原型继承的实质其实是从无到有的一个过程 这种从无到有的设计方法是值得思考的

### 5. 原型继承的问题与继承方式的选择

javascript的原型继承依赖 关系数组 和 函数式语言 两个方面特性

#### 原型继承的问题

- 在 维护构造器引用 和 外部原型链 之间无法平衡
- 没有提供调用父类方法的机制

原型继承是一个典型的以时间换空间的解决方案

js原本就是为了轻量级 嵌入式 以web浏览器端为主的脚本语言而设计的 这种环境决定了 空间占用是关键 而时间消耗相对次要的多

js本身的优点也是缺点 两方面体现：

- 它能够组织大型对象系统 但又对大型对象系统的封装和多态处理不够， 所以在大型应用时常常缚手缚脚 心有余力而不足
- 能够组织小型的应用 但又因为 动态 函数式 原型继承 三方面的灵活性而带来了一种混杂的程序设计语言学知识体系 结果是易学难精 越深入底层越感觉混乱

作者建议在继承方式上应当则需而用 大型系统上用累积成的思路 小型结构或体系使用原型继承的思路

## 函数式语言

## 动态语言







